# VLM Configuration
# Ollama endpoint and model tier configuration

# =============================================================================
# ENDPOINTS
# =============================================================================
endpoints:
  default:
    url: http://localhost:11434
    max_concurrent: 1
    timeout_seconds: 900
    retry_attempts: 3
    retry_delay_seconds: 1.0

  # Example: separate endpoint for large models on GPU server
  # gpu_server:
  #   url: http://gpu-server:11434
  #   max_concurrent: 2

# =============================================================================
# MODELS
# =============================================================================
models:
  qwen3-vl:4b:
    endpoint: default
    tier: small
    context_window: 32768

  qwen3-vl:8b:
    endpoint: default
    tier: medium
    context_window: 32768

  qwen3-vl:30b:
    endpoint: default
    tier: large
    context_window: 32768

# =============================================================================
# KEY-TO-TIER MAPPINGS
# =============================================================================
# Maps classification keys to model tiers: small (4B), medium (8B), large (30B)
# Can override with specific model names if needed

key_mapping:
  # Stage 1: Scene reasoning (always large - needs image understanding)
  stage1: large

  # --- Scene Context ---
  weather: small
  time_of_day: small
  road_type: small
  traffic_situation: medium

  # --- Object Detection ---
  pedestrians_present: small
  cyclists_present: small
  construction_activity: small
  traffic_signals_visible: medium
  vehicle_count: medium
  notable_elements: medium

  # --- Spatial Reasoning ---
  occlusion_level: medium
  depth_complexity: large
  nearest_vehicle_distance: large
  spatial_relations: large

  # --- Perceptual Challenges ---
  visual_degradation: medium
  similar_object_confusion: large
  edge_case_objects: large

  # --- Safety Critical ---
  safety_criticality: large
  vulnerable_road_users: large
  immediate_hazards: large
  required_action: large

  # --- Counting & Quantification ---
  pedestrian_count: large
  vehicle_count_by_type: large

  # --- Attribute Binding ---
  traffic_light_states: large
  lane_marking_type: large
